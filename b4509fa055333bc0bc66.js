(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{480:function(e,t,r){var content=r(501);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(41).default)("1acd9158",content,!0,{sourceMap:!1})},500:function(e,t,r){"use strict";var o=r(480);r.n(o).a},501:function(e,t,r){(e.exports=r(40)(!1)).push([e.i,"form[data-v-dbb44cb0]{margin-top:8px;max-width:240px;flex-wrap:wrap;-webkit-box-pack:center;justify-content:center}form[data-v-dbb44cb0],section[data-v-dbb44cb0]{width:100%;display:-webkit-box;display:flex}section[data-v-dbb44cb0]{-webkit-box-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}p.errors[data-v-dbb44cb0]{margin:28px 0;text-align:center}p.errors span[data-v-dbb44cb0]{display:block;color:#ed1c24;font-size:16px}a[data-v-dbb44cb0],span[data-v-dbb44cb0]{font-size:14px}span[data-v-dbb44cb0]{color:#c1bbc9}",""])},541:function(e,t,r){"use strict";r.r(t);r(46),r(47),r(15),r(42);var o=r(8),n=r(0),c=r(71),d={name:"restore-password",layout:"authorize",head:function(){return{title:"Minority - восстановление пароля",meta:[{hid:"description",name:"description",content:"Восстановите пароль с помощь е-маил адреса чтобы войти в личный кабинет"}]}},data:function(){return{loading:!1,errors:[],state:0,form:{recaptachaToken:"",email:"",resetCode:"",password:""},statuses:{email:null,resetCode:null,password:""},description:this.$t("reset_password.step_1_text"),buttonText:this.$t("reset_password.step_1_button_text")}},methods:Object(n.a)({resetHandler:function(){this.loading||(this.errors=[],0===this.state?this.reset():1===this.state?this.checkResetCode():2===this.state?this.setPassword():this.errors=["Ошибка: контроллер для стейта не найден. Обратитесь в поддержку"])},setPassword:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loading=!0,e.prev=1,this.form.password.trim().length){e.next=7;break}this.statuses.password="error",this.errors=["Укажите новый пароль"],e.next=11;break;case 7:return e.next=9,this.setPasswordReset(this.form);case 9:if(!0!==(t=e.sent).status)for(r in this.statuses)t.errors.hasOwnProperty(r)?this.statuses[r]="error":this.statuses[r]="success",t.errors[r]&&this.errors.push(t.errors[r][0]);else this.$router.push(this.localePath("auth"));case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),this.errors.push("Неизвестная ошибка"),this.errors.push(e.t0.toString());case 17:return e.prev=17,this.loading=!1,e.finish(17);case 20:case"end":return e.stop()}},e,this,[[1,13,17,20]])}));return function(){return e.apply(this,arguments)}}(),checkResetCode:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loading=!0,e.prev=1,this.form.resetCode.trim().length){e.next=7;break}this.statuses.resetCode="error",this.errors=[this.$t("reset_password.enter_code_error")],e.next=11;break;case 7:return e.next=9,this.validateResetCode(this.form);case 9:if(!1===(t=e.sent).status)for(r in this.statuses)t.errors.hasOwnProperty(r)?this.statuses[r]="error":this.statuses[r]="success",t.errors[r]&&this.errors.push(t.errors[r][0]);else this.statuses.resetCode="success",this.description=t.message,this.state=2,this.buttonText=this.$t("reset_password.set_password_btn_text");case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),this.errors.push(this.$t("reset_password.unknown_error")),this.errors.push(e.t0.toString());case 17:return e.prev=17,this.loading=!1,e.finish(17);case 20:case"end":return e.stop()}},e,this,[[1,13,17,20]])}));return function(){return e.apply(this,arguments)}}(),reset:function(){var e=Object(o.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=5,this.$recaptcha("reset");case 5:this.form.recaptachaToken=e.sent;case 6:return e.next=8,this.sendReset(this.form);case 8:!0!==(t=e.sent).status?(t.errors.email&&(this.statuses.email="error",this.errors.push(t.errors.email[0])),t.errors.general&&this.errors.push(t.errors.general[0])):(this.statuses.email="success",this.description=t.message,this.state=1,this.buttonText="Продолжить"),this.loading=!1,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:return e.prev=16,this.loading=!1,e.finish(16);case 19:case"end":return e.stop()}},e,this,[[1,13,16,19]])}));return function(){return e.apply(this,arguments)}}()},Object(c.b)("user",["sendReset","validateResetCode","setPasswordReset","auth"]))},h=(r(500),r(23)),component=Object(h.a)(d,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("h2",{staticClass:"minority-heading"},[e._v(e._s(e.$t("reset_password.headline")))]),e._v(" "),r("h3",{staticClass:"minority-subheading"},[e._v(e._s(e.description))]),e._v(" "),e.errors.length?r("p",{staticClass:"errors"},e._l(e.errors,function(t,o){return r("span",{key:"error_idx__"+o},[e._v(e._s(t))])}),0):e._e(),e._v(" "),r("form",{attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.resetHandler()}}},[r("minority-input",{attrs:{icon:"/icons/mail-icon.svg",placeholder:e.$t("reset_password.email"),"suffix-icon":e.statuses.email,disabled:e.state>0,block:"",type:"email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e._v(" "),e.state>0?r("minority-input",{attrs:{placeholder:e.$t("reset_password.reset_code"),"suffix-icon":e.statuses.resetCode,disabled:e.state>1,block:"",type:"text"},model:{value:e.form.resetCode,callback:function(t){e.$set(e.form,"resetCode",t)},expression:"form.resetCode"}}):e._e(),e._v(" "),e.state>1?r("minority-input",{attrs:{icon:"/icons/secure-icon.svg",placeholder:e.$t("reset_password.new_password"),"suffix-icon":e.statuses.password,block:"",type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}):e._e(),e._v(" "),r("minority-button",{staticStyle:{margin:"16px 0"},attrs:{loading:e.loading,type:"submit",block:""}},[e._v(e._s(e.buttonText))])],1),e._v(" "),r("span",[r("n-link",{staticClass:"default-link",attrs:{to:e.localePath("auth")}},[e._v(e._s(e.$t("reset_password.back")))])],1)])},[],!1,null,"dbb44cb0",null);t.default=component.exports}}]);